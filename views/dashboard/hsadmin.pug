doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    
    link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC' crossorigin='anonymous')
    link(rel='stylesheet', href='/css/font.css')
    link(rel='stylesheet', href='/css/modal.css')
    //- Donut Graph
    script(src="https://cdn.jsdelivr.net/npm/chart.js")
    script(src="https://cdn.jsdelivr.net/npm/chartjs-plugin-doughnutlabel")



    title Dashboard
    include ../partials/color.pug
  body
    include ../partials/navHSA.pug
    
    .content
      // Header Title for page
      .row.mx-5  
        .col-12.d-flex.align-items-center
          h2.text Dashboard
            //- First Row (Checked In, Overall Stayed, Checked Out)
            .row.mx-5
              //- Checked In
              .col-3.col-md-3.mt-4.d-flex.justify-content-start
                .card.act_card.card1.custom-hover-shadow
                  .card-body.act_card_body
                    .d-flex.flex-row.align-items-center
                      //- Container for the icon with a background box
                      .icon-container.d-flex.align-items-center
                        i.fas.fa-thumbtack.icon
                      //- Right column for span and h1
                      .d-flex.flex-column.align-items-start.body-info
                        h2 #{guestAccountCount}
                        span.card-titles.text-muted Checked In

              //- New Book
              .col-3.col-md-3.mt-4.d-flex.justify-content-start
                .card.act_card.card1.custom-hover-shadow
                  .card-body.act_card_body
                    .d-flex.flex-row.align-items-center
                      //- Container for the icon with a background box
                      .icon-container.d-flex.align-items-center
                        i.fas.fa-bookmark.icon
                      //- Right column for span and h1
                      .d-flex.flex-column.align-items-start.body-info
                        h2 #{newBookCount}
                        span.card-titles.text-muted New Book
                        
              //-Overall Stayed
              .col-3.col-md-3.mt-4.d-flex.justify-content-start
                .card.act_card.card1.custom-hover-shadow
                  .card-body.act_card_body
                    .d-flex.flex-row.align-items-center
                      //- Container for the icon with a background box
                      .icon-container.d-flex.align-items-center
                        i.fas.fa-arrow-right-to-bracket.icon
                      //- Right column for span and h1
                      .d-flex.flex-column.align-items-start.body-info
                        h2 #{overallStayedGuestsCount}
                        span.card-titles.text-muted Overall Stayed Guest
                      
              //-Checked Out              
              .col-3.col-md-3.mt-4.d-flex.justify-content-start
                .card.act_card.card1.custom-hover-shadow
                  .card-body.act_card_body
                    .d-flex.flex-row.align-items-center
                      //- Container for the icon with a background box
                      .icon-container.d-flex.align-items-center
                        i.fas.fa-arrow-right-from-bracket.icon
                      //- Right column for span and h1
                      .d-flex.flex-column.align-items-start.body-info

                        h2 #{archivedGuestAccountCount}

                        span.card-titles.text-muted Checked out
                      

            //-Second Row
            .row.mx-5
              .col-6.col-md-6.mt-4  
                .card.shadow-sm(style="height: 300px;")
                  .card-body
                    .d-flex.flex-column.align-items-start.text-muted
                      h4.card-title.mb-2.text-muted Reservation
                      h2 #{reservationAllCount}
                      table 
                        thead 
                          th 
                          th 
                        tbody
                          each r in reservations
                            tr
                              td= r.roomtype
                              td= r.roomtype_count

              script.
                var adultNoCount = #{adultNoCount};
                var childNoCount = #{childNoCount};
                
              .col-6.col-md-6.mt-4
                .card.shadow-sm(style="height: 300px;")
                  .card-body
                    .row
                      .col-6
                        h4.card-title.mb-2 Guest In-House 
                        .canvas-container
                          canvas#donutChart(style="height: 230px;")
                      .col-6
                        .d-flex.flex-column.align-items-start
                          h2 Adult: #{adultNoCount}
                          h2#childrenCount Children: #{childNoCount}
                          h2#totalCount Total: 
            //-Third Row
            .row.mx-5
              .col-12.col-md-12.mt-4            
                .card.shadow-sm(style="height: 300px;")
                  .card-body
                    h4.card-title.mb-3 Rooms
                        .d-flex.flex-column.align-items-start
                          .table-scroll
                            table.table.table-striped.table-hover
                              thead 
                                th Room Type
                                th Vacant
                                th Occupied
                                th On-Change 
                                th Out-of-Order
                                th Total
                              tbody(style="height: 100%;")
                                each x in rooms
                                  tr
                                    td #{x.roomtype}
                                    td #{x.vacantcount}
                                    td #{x.occupiedcount}
                                    td #{x.onchangecount}
                                    td #{x.outofordercount}
                                    td #{x.totalcount}

            //-Fourth Row
            .row.mx-5
              .col-6.col-md-6.mt-4  
                .card.shadow-sm(style="height: 300px;")
                  .card-body
                    .d-flex.flex-column.align-items-start.text-muted
                      span.card-title.mb-2.text-muted Arrival
                      table 
                        thead 
                          th Reservation ID
                          th Guest Name 
                          th Checkin Date
                        tbody
                          each x in arrivalArray
                            tr
                              td #{x.reservationid}
                              td #{x.fullname}
                              td #{x.checkindate}

              .col-6.col-md-6.mt-4  
                .card.shadow-sm(style="height: 300px;")
                  .card-body
                    .d-flex.flex-column.align-items-start.text-muted
                      span.card-title.mb-2.text-muted Departure
                      table 
                        thead 
                          th Room Number 
                          th Guest Name 
                          th Checkout Date
                        tbody
                          each x in departuresArray
                            tr
                              td #{x.roomnum}
                              td #{x.fullname}
                              td #{x.checkoutdate}


    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js' integrity='sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM' crossorigin='anonymous')
    script(src='https://kit.fontawesome.com/72e773f6c0.js' crossorigin='anonymous')
    script(src='/js/modal.js') 
    script(src='/js/nav-active.js')
    script(src='/js/chartScript.js')  